{
  "info": {
    "name": "Schools API Collection",
    "description": "Comprehensive API collection for School Management System with advanced features, caching, analytics, bulk operations, and role-based access control.",
    "version": "2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://192.168.0.105:4000/api",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "schoolId",
      "value": "",
      "type": "string"
    },
    {
      "key": "ownerId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "ðŸ” Authentication",
      "description": "Authentication endpoints for getting access tokens",
      "item": [
        {
          "name": "Login to get token",
          "description": "Authenticate user and get access token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('authToken', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ“š CRUD Operations",
      "description": "Basic Create, Read, Update, Delete operations for schools",
      "item": [
        {
          "name": "Create School",
          "description": "Create a new school (requires SUPER_ADMIN or SCHOOL_ADMIN role)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.id) {",
                  "        pm.collectionVariables.set('schoolId', response.data.id.toString());",
                  "        console.log('School ID saved:', response.data.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Elite International School\",\n  \"shortName\": \"EIS\",\n  \"code\": \"EIS001\",\n  \"motto\": \"Excellence in Education\",\n  \"about\": \"A prestigious international school providing quality education\",\n  \"email\": \"info@eliteinternational.edu\",\n  \"phone\": \"+1234567890\",\n  \"website\": \"https://www.eliteinternational.edu\",\n  \"establishedDate\": \"2020-01-01T00:00:00.000Z\",\n  \"principal\": \"Dr. John Smith\",\n  \"vicePrincipal\": \"Mrs. Jane Doe\",\n  \"country\": \"United States\",\n  \"state\": \"California\",\n  \"city\": \"Los Angeles\",\n  \"address\": \"123 Education Street, LA 90210\",\n  \"postalCode\": \"90210\",\n  \"latitude\": 34.0522,\n  \"longitude\": -118.2437,\n  \"themeColor\": \"#1E40AF\",\n  \"timezone\": \"America/Los_Angeles\",\n  \"locale\": \"en-US\",\n  \"currency\": \"USD\",\n  \"status\": \"ACTIVE\",\n  \"ownerId\": 1,\n  \"metadata\": {\n    \"accreditation\": \"WASC\",\n    \"founded\": 2020,\n    \"campusSize\": \"50 acres\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools",
              "host": ["{{baseUrl}}"],
              "path": ["schools"]
            }
          }
        },
        {
          "name": "Get School by ID",
          "description": "Get a specific school by ID with optional relations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}?include=owner,classes,departments,subjects",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}"],
              "query": [
                {
                  "key": "include",
                  "value": "owner,classes,departments,subjects",
                  "description": "Comma-separated list of relations to include"
                }
              ]
            }
          }
        },
        {
          "name": "Get Schools with Pagination",
          "description": "Get schools with pagination, filtering, and sorting",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools?page=1&limit=10&sort=name&order=asc&status=ACTIVE&include=owner",
              "host": ["{{baseUrl}}"],
              "path": ["schools"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (starts from 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of items per page (max 100)"
                },
                {
                  "key": "sort",
                  "value": "name",
                  "description": "Sort field (name, code, createdAt, updatedAt, establishedDate)"
                },
                {
                  "key": "order",
                  "value": "asc",
                  "description": "Sort order (asc, desc)"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "Filter by status (ACTIVE, INACTIVE, PENDING, SUSPENDED)"
                },
                {
                  "key": "include",
                  "value": "owner",
                  "description": "Comma-separated list of relations to include"
                }
              ]
            }
          }
        },
        {
          "name": "Update School",
          "description": "Update an existing school (requires SUPER_ADMIN or SCHOOL_ADMIN role)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Elite International Academy\",\n  \"motto\": \"Excellence in Education and Innovation\",\n  \"principal\": \"Dr. John Smith Jr.\",\n  \"themeColor\": \"#2563EB\",\n  \"metadata\": {\n    \"accreditation\": \"WASC\",\n    \"founded\": 2020,\n    \"campusSize\": \"50 acres\",\n    \"updated\": \"2024-01-01\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}"]
            }
          }
        },
        {
          "name": "Delete School (Soft Delete)",
          "description": "Soft delete a school (requires SUPER_ADMIN or SCHOOL_ADMIN role)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}"]
            }
          }
        },
        {
          "name": "Restore School",
          "description": "Restore a soft-deleted school (requires SUPER_ADMIN or SCHOOL_ADMIN role)",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}/restore",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}", "restore"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ”„ Bulk Operations",
      "description": "Bulk create, update, and delete operations for multiple schools",
      "item": [
        {
          "name": "Bulk Create Schools",
          "description": "Create multiple schools at once (requires SUPER_ADMIN role)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schools\": [\n    {\n      \"name\": \"Springfield Elementary\",\n      \"code\": \"SPR001\",\n      \"email\": \"info@springfield.edu\",\n      \"phone\": \"+1234567891\",\n      \"country\": \"United States\",\n      \"state\": \"Illinois\",\n      \"city\": \"Springfield\",\n      \"address\": \"456 School Street\",\n      \"ownerId\": 1\n    },\n    {\n      \"name\": \"Riverside High School\",\n      \"code\": \"RIV001\",\n      \"email\": \"info@riverside.edu\",\n      \"phone\": \"+1234567892\",\n      \"country\": \"United States\",\n      \"state\": \"California\",\n      \"city\": \"Riverside\",\n      \"address\": \"789 Education Ave\",\n      \"ownerId\": 1\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/bulk",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "bulk"]
            }
          }
        },
        {
          "name": "Bulk Update Schools",
          "description": "Update multiple schools at once (requires SUPER_ADMIN or SCHOOL_ADMIN role)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"updates\": [\n    {\n      \"id\": 1,\n      \"status\": \"ACTIVE\",\n      \"themeColor\": \"#059669\"\n    },\n    {\n      \"id\": 2,\n      \"status\": \"ACTIVE\",\n      \"themeColor\": \"#DC2626\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/bulk",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "bulk"]
            }
          }
        },
        {
          "name": "Bulk Delete Schools",
          "description": "Soft delete multiple schools at once (requires SUPER_ADMIN or SCHOOL_ADMIN role)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schoolIds\": [3, 4]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/bulk",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "bulk"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ“Š Statistics & Analytics",
      "description": "School statistics, analytics, and performance metrics",
      "item": [
        {
          "name": "Get School Statistics",
          "description": "Get comprehensive statistics for a specific school",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}", "stats"]
            }
          }
        },
        {
          "name": "Get School Analytics (30 days)",
          "description": "Get analytics data for the last 30 days",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}/analytics?period=30d",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}", "analytics"],
              "query": [
                {
                  "key": "period",
                  "value": "30d",
                  "description": "Analytics period (7d, 30d, 90d, 1y)"
                }
              ]
            }
          }
        },
        {
          "name": "Get School Analytics (7 days)",
          "description": "Get analytics data for the last 7 days",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}/analytics?period=7d",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}", "analytics"],
              "query": [
                {
                  "key": "period",
                  "value": "7d",
                  "description": "Analytics period (7d, 30d, 90d, 1y)"
                }
              ]
            }
          }
        },
        {
          "name": "Get School Performance",
          "description": "Get performance metrics and scores for a school",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/{{schoolId}}/performance",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "{{schoolId}}", "performance"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ” Search & Filter",
      "description": "Advanced search and filtering capabilities",
      "item": [
        {
          "name": "Search Schools",
          "description": "Search schools with text and filters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/search?search=elite&status=ACTIVE&country=United States&page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "search"],
              "query": [
                {
                  "key": "search",
                  "value": "elite",
                  "description": "Search term for name, code, or description"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "Filter by status"
                },
                {
                  "key": "country",
                  "value": "United States",
                  "description": "Filter by country"
                },
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Advanced Search with Date Range",
          "description": "Search schools with date range filters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/search?establishedAfter=2020-01-01T00:00:00.000Z&establishedBefore=2024-12-31T23:59:59.999Z&status=ACTIVE&sort=establishedDate&order=desc",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "search"],
              "query": [
                {
                  "key": "establishedAfter",
                  "value": "2020-01-01T00:00:00.000Z",
                  "description": "Schools established after this date"
                },
                {
                  "key": "establishedBefore",
                  "value": "2024-12-31T23:59:59.999Z",
                  "description": "Schools established before this date"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "Filter by status"
                },
                {
                  "key": "sort",
                  "value": "establishedDate",
                  "description": "Sort by establishment date"
                },
                {
                  "key": "order",
                  "value": "desc",
                  "description": "Descending order"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ“¤ Export & Import",
      "description": "Data export and import functionality",
      "item": [
        {
          "name": "Export Schools (JSON)",
          "description": "Export schools data in JSON format",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/export?format=json&status=ACTIVE",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "export"],
              "query": [
                {
                  "key": "format",
                  "value": "json",
                  "description": "Export format (json, csv)"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "Filter by status for export"
                }
              ]
            }
          }
        },
        {
          "name": "Export Schools (CSV)",
          "description": "Export schools data in CSV format",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/export?format=csv&status=ACTIVE",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "export"],
              "query": [
                {
                  "key": "format",
                  "value": "csv",
                  "description": "Export format (json, csv)"
                },
                {
                  "key": "status",
                  "value": "ACTIVE",
                  "description": "Filter by status for export"
                }
              ]
            }
          }
        },
        {
          "name": "Import Schools",
          "description": "Import schools data from JSON (requires SUPER_ADMIN role)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schools\": [\n    {\n      \"name\": \"Imported School 1\",\n      \"code\": \"IMP001\",\n      \"email\": \"info@imported1.edu\",\n      \"phone\": \"+1234567893\",\n      \"country\": \"United States\",\n      \"state\": \"Texas\",\n      \"city\": \"Houston\",\n      \"address\": \"123 Import Street\",\n      \"ownerId\": 1\n    },\n    {\n      \"name\": \"Imported School 2\",\n      \"code\": \"IMP002\",\n      \"email\": \"info@imported2.edu\",\n      \"phone\": \"+1234567894\",\n      \"country\": \"United States\",\n      \"state\": \"Florida\",\n      \"city\": \"Miami\",\n      \"address\": \"456 Import Avenue\",\n      \"ownerId\": 1\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/import",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "import"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ› ï¸ Utility Endpoints",
      "description": "Utility and helper endpoints",
      "item": [
        {
          "name": "Generate Code Suggestions",
          "description": "Generate school code suggestions based on name",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/suggestions/code?name=Elite International Academy",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "suggestions", "code"],
              "query": [
                {
                  "key": "name",
                  "value": "Elite International Academy",
                  "description": "School name for code generation"
                }
              ]
            }
          }
        },
        {
          "name": "Get School Count by Status",
          "description": "Get count of schools grouped by status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/stats/status",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "stats", "status"]
            }
          }
        },
        {
          "name": "Get School Count by Location",
          "description": "Get count of schools grouped by location",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/stats/location",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "stats", "location"]
            }
          }
        },
        {
          "name": "Get Schools by Owner",
          "description": "Get all schools owned by a specific owner",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/owner/{{ownerId}}?include=classes,departments",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "owner", "{{ownerId}}"],
              "query": [
                {
                  "key": "include",
                  "value": "classes,departments",
                  "description": "Comma-separated list of relations to include"
                }
              ]
            }
          }
        },
        {
          "name": "Get Schools by Status",
          "description": "Get all schools with a specific status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/status/ACTIVE?include=owner",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "status", "ACTIVE"],
              "query": [
                {
                  "key": "include",
                  "value": "owner",
                  "description": "Comma-separated list of relations to include"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ’¾ Cache Management",
      "description": "Cache management and optimization endpoints",
      "item": [
        {
          "name": "Get Cache Statistics",
          "description": "Get cache performance statistics (requires SUPER_ADMIN role)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/schools/cache/stats",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "cache", "stats"]
            }
          }
        },
        {
          "name": "Warm Cache (General)",
          "description": "Warm up cache for all schools (requires SUPER_ADMIN role)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/cache/warm",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "cache", "warm"]
            }
          }
        },
        {
          "name": "Warm Cache (Specific School)",
          "description": "Warm up cache for a specific school (requires SUPER_ADMIN role)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schoolId\": \"{{schoolId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/schools/cache/warm",
              "host": ["{{baseUrl}}"],
              "path": ["schools", "cache", "warm"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set default headers",
          "pm.request.headers.add({",
          "    key: 'Accept',",
          "    value: 'application/json'",
          "});",
          "",
          "// Add request ID for tracking",
          "pm.request.headers.add({",
          "    key: 'X-Request-ID',",
          "    value: pm.variables.replaceIn('{{$guid}}')",
          "});",
          "",
          "// Add user agent",
          "pm.request.headers.add({",
          "    key: 'User-Agent',",
          "    value: 'PostmanSchoolsAPI/2.0.0'",
          "});"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Common test script",
          "pm.test('Status code is valid', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 400, 401, 403, 404, 500]);",
          "});",
          "",
          "pm.test('Response has required structure', function () {",
          "    if (pm.response.code === 200 || pm.response.code === 201) {",
          "        const response = pm.response.json();",
          "        pm.expect(response).to.have.property('success');",
          "        pm.expect(response).to.have.property('meta');",
          "        pm.expect(response.meta).to.have.property('timestamp');",
          "    }",
          "});",
          "",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Log response for debugging",
          "if (pm.response.code >= 400) {",
          "    console.log('Error Response:', pm.response.text());",
          "}"
        ]
      }
    }
  ]
} 